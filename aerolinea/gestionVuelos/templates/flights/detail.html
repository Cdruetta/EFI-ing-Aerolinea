{% extends 'base.html' %}

{% block title %}Detalle de Vuelo{% endblock %}

{% block content %}
    <h2>Vuelo: {{ flight.origin }} → {{ flight.destination }}</h2>
    <ul class="list-group">
        <li class="list-group-item"><strong>Salida:</strong> {{ flight.departure_time|date:"d/m/Y H:i" }}</li>
        <li class="list-group-item"><strong>Llegada:</strong> {{ flight.arrival_time|date:"d/m/Y H:i" }}</li>
        <li class="list-group-item"><strong>Duración:</strong> {{ flight.duration }}</li>
        <li class="list-group-item"><strong>Estado:</strong> {{ flight.status }}</li>
        <li class="list-group-item"><strong>Precio base:</strong> ${{ flight.base_price }}</li>
    </ul>

    <div class="mt-4">
        <h3>Asientos disponibles</h3>
        <p>{{ mensaje }}</p>

        {% if available_seats %}
            <ul class="list-group">
                {% for seat in available_seats %}
                    <li class="list-group-item">
                        Asiento {{ seat.number }} - Tipo: {{ seat.seat_type }}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="mt-3">
        <a href="{% url 'gestionVuelos:flight_list' %}" class="btn btn-secondary">Volver a la lista de vuelos</a>
        {% if user.is_authenticated %}
            <a href="{% url 'gestionVuelos:reservation_create' flight.id %}" class="btn btn-success">Reservar este vuelo</a>
        {% else %}
            <a href="{% url 'login' %}?next={% url 'gestionVuelos:flight_detail' flight.id %}" class="btn btn-primary">Iniciar sesión para reservar</a>
        {% endif %}
    </div>
{% endblock %}
